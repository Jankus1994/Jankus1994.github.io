<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Control Point - Domination Game</title>
<link rel="stylesheet" href="style.css">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
<div class="container">
<h1>Control Point</h1>
<div>CP ID: <span id="cpId"></span></div>
<div>Vlastník: <span id="owner">Načítám…</span></div>
<button onclick="setOwner('A')">A</button>
<button onclick="setOwner('B')">B</button>
<button onclick="setOwner('neutral')">Neutrální</button>

<h2>Aktuální skóre</h2>
<div>Score A: <span id="scoreA">0</span> | Score B: <span id="scoreB">0</span></div>

<h2>Přehled všech CP</h2>
<table class="table">
<thead><tr><th>CP</th><th>Vlastník</th></tr></thead>
<tbody id="locationsTable"></tbody>
</table>
</div>

<script>
const firebaseConfig = {
      apiKey: "AIzaSyDOEonHWXYZU5bYuETpI_6bk7oIVyHQP1Q",
      authDomain: "domination-game-c1426.firebaseapp.com",
      projectId: "domination-game-c1426",
      storageBucket: "domination-game-c1426.firebasestorage.app",
      messagingSenderId: "630646319",
      appId: "1:630646319:web:8ef916ac9c10ca071a48da"  
};firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const urlParams = new URLSearchParams(window.location.search);
const cpId = urlParams.get('id') || "cp1"; 
document.getElementById("cpId").textContent = cpId;

const ownerEl = document.getElementById("owner");
function setOwner(o){ db.collection("locations").doc(cpId).set({ owner:o },{merge:true}); }

db.collection("locations").doc(cpId).onSnapshot(doc=>{
  if(doc.exists) ownerEl.textContent = doc.data().owner;
});

const scoreAEl = document.getElementById("scoreA");
const scoreBEl = document.getElementById("scoreB");
db.collection("scores").doc("teams").onSnapshot(doc=>{
  if(doc.exists){
    scoreAEl.textContent = doc.data().A.toFixed(1);
    scoreBEl.textContent = doc.data().B.toFixed(1);
  }
});

const tableEl = document.getElementById("locationsTable");
function refreshLocations(){
  db.collection("locations").get().then(snap=>{
    tableEl.innerHTML="";
    snap.forEach(doc=>{
      const row = document.createElement("tr
