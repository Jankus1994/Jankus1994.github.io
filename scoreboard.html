<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Scoreboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
</head>
<body>
  <div class="container">
    <h1>Domination Game – Scoreboard</h1>

    <div class="card">
      <h2>Skóre</h2>
      <p>Tým A: <span id="scoreA">0</span></p>
      <p>Tým B: <span id="scoreB">0</span></p>
      <p>Hra: <span id="gameStatus">Načítám…</span></p>
    </div>

    <div class="card">
      <h2>Control Points</h2>
      <ul id="locationsList"></ul>
    </div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDOEonHWXYZU5bYuETpI_6bk7oIVyHQP1Q",
      authDomain: "domination-game-c1426.firebaseapp.com",
      projectId: "domination-game-c1426",
      storageBucket: "domination-game-c1426.firebasestorage.app",
      messagingSenderId: "630646319",
      appId: "1:630646319:web:8ef916ac9c10ca071a48da"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // === Skóre (zobrazené už dělené dividerem) ===
    db.collection("scores").doc("teams").onSnapshot(doc => {
      if (!doc.exists) return;
      const s = doc.data();
      document.getElementById("scoreA").textContent = ((s.A ?? 0) / divider).toFixed(1);
      document.getElementById("scoreB").textContent = ((s.B ?? 0) / divider).toFixed(1);
    });
    
    // === Výpis všech stanovišť ===
    db.collection("locations").onSnapshot(snap => {
      const grid = document.getElementById("locationsGrid");
      grid.innerHTML = "";
      snap.forEach(d => {
        const data = d.data();
        const owner = data.owner || "neutral";
        const el = document.createElement("div");
        el.className = `tile owner-${owner}`;
        el.textContent = `${d.id}: ${owner}`;
        grid.appendChild(el);
      });
    });
  </script>
</body>
</html>
